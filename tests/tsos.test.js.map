{"version":3,"file":"tsos.test.js","sourceRoot":"","sources":["tsos.test.ts"],"names":[],"mappings":";;AAAA,yBAAyB;AACzB,6BAA6B;AAC7B,iCAAiC;AAEjC,MAAM,UAAU,GAAG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,wBAAwB,CAAC,CAAC;AAI5E,IAAI,CAAC,sBAAsB,EAAE,IAAI;IAE7B,IAAI,GAAG,GAAG,GAAG,UAAU,WAAW,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,uBAAuB,CAAC,EAAE,CAAC;IAClF,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,MAAM,EAAC,IAAI,EAAC,EAAE,CAAC,IAAY,EAAE,MAAc,EAAE,MAAc;QAExE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACnC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,0BAA0B,EAAE,IAAI;IAEjC,IAAI,GAAG,GAAG,GAAG,UAAU,yBAAyB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,uBAAuB,CAAC,EAAE,CAAC;IAChG,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,MAAM,EAAC,IAAI,EAAC,EAAE,CAAC,IAAY,EAAE,MAAc,EAAE,MAAc;QAExE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,oBAAoB,EAAE,IAAI;IAE3B,IAAI,GAAG,GAAG,yDAAyD,CAAC;IACpE,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IACpB,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,MAAM,EAAC,IAAI,EAAC,EAAE,CAAC,IAAY,EAAE,MAAc,EAAE,MAAc;QAExE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,2BAA2B,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;QACtF,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,+BAA+B,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;QAC1F,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,2BAA2B,CAAC,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;QAChH,KAAK,CAAC,EAAE,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nimport * as shell from 'shelljs';\n\nconst tsnodePath = 'node ' + path.join(__dirname, '/../dist/tsnode/bin.js');\n\n// consider swapping over to: https://github.com/avajs/ava\n\ntest('privates are removed', done =>\n{\n    let cmd = `${tsnodePath} --fast ${path.join(__dirname, '/subjects/TwoNames.ts')}`;\n    shell.exec(cmd, {silent:true}, (code: number, stdout: string, stderr: string) =>\n    {\n        expect(code).toBe(0);\n        expect(stdout).toBe(\"undefined\\n\");\n        expect(stderr).toBe('');\n        done();\n    });\n});\n\ntest('privates are not removed', done =>\n{\n    let cmd = `${tsnodePath} --fast --no-visitors ${path.join(__dirname, '/subjects/TwoNames.ts')}`;\n    shell.exec(cmd, {silent:true}, (code: number, stdout: string, stderr: string) =>\n    {\n        expect(code).toBe(0);\n        expect(stdout).toBe(\"John\\n\");\n        expect(stderr).toBe('');\n        done();\n    });\n});\n\ntest('simple rollup test', done =>\n{\n    let cmd = `../node_modules/.bin/rollup --config ./rollup.config.js`;\n    shell.cd(__dirname);\n    shell.exec(cmd, {silent:true}, (code: number, stdout: string, stderr: string) =>\n    {\n        expect(code).toBe(0);\n        expect(fs.existsSync(path.join(__dirname, '/output/TwoNamesBundle.js'))).toBeTruthy();\n        expect(fs.existsSync(path.join(__dirname, '/output/TwoNamesBundle.js.map'))).toBeTruthy();\n        expect(fs.readFileSync(path.join(__dirname, '/output/TwoNamesBundle.js'), 'utf8').includes('John')).toBeFalsy();\n        shell.cd(__dirname + '/..');\n        done();\n    });\n});\n"]}